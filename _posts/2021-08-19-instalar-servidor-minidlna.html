---
layout: post
title: Instalar servidor MiniDLNA
date: '2021-08-19T20:59:00.001+02:00'
author: David P.
tags:
- dlna
- plex
- plexmediaserver
- ReadyMedia
- kernel
- musica
- vlc
- SmartTV
- inotify
- ssh
- fotos
- raspberry
- video
modified_time: '2021-08-19T20:59:32.819+02:00'
thumbnail: https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhbmmwvDgRV0F26JRjuGDaWMx5W4vEOkg62p8U-PY7C9zrADQ-Erwwj9nvXdn5FD1LYNubzKJOD9GygkuttWj9E0aEHAzTrNtTw6zPyZL-Zt5P8BImfBJlQU_8UynhLAvdR1vP_nIiUoDI/s72-w304-c-h320/Captura+de+pantalla+de+2021-08-19+20-08-40.png
blogger_id: tag:blogger.com,1999:blog-3624480011084378437.post-5764288058462945950
blogger_orig_url: https://www.enfaseterminal.com/2021/08/instalar-servidor-minidlna.html
---

<p style="text-align: justify;">Vamos a instalar un servidor DLNA en, por ejemplo Raspberry, para utilizarla de servidor multimedia para poder ver nuestros archivos en nuestra SmartTV. La tecnología DLNA es admitida por la mayoría de dispositivos multimedia actuales, a diferencia de utilizar un <a href="https://www.enfaseterminal.com/search/label/plexmediaserver" target="_blank">servidor PLEX</a> en la que tenemos que instalar la APP en nuestra SmartTV y registrándose en su plataforma.</p><p style="text-align: justify;">Es un servidor muy sobrio y de un consumo de recursos muy reducido, el aspecto es el de un explorador de archivos, y su reproductor multimedia muy simple. Pero cumple su función de servidor de videos, música e imágenes en nuestra red local.</p><p style="text-align: justify;">También podríamos instalar nuestro servidor DLNA en un viejo ordenador en el que hubiéramos instalado un Linux con alguna de las múltiples distribuciones basadas en Debian.</p><p style="text-align: justify;">Accedemos a nuestra Raspberry o nuestro servidor casero a traves de <a href="https://www.enfaseterminal.com/search/label/ssh" target="_blank">SSH</a>&nbsp;e instalamos con privilegios de <a href="https://www.enfaseterminal.com/search/label/root" target="_blank">root</a> la aplicación&nbsp;MiniDLNA también conocida como&nbsp;ReadyMedia</p><blockquote><p style="text-align: justify;"><span style="color: #ffa400;"><b>sudo apt-get install minidlna</b></span></p></blockquote><p>&nbsp;Iniciaremos el servicio:</p><blockquote><p><span style="color: #ffa400;"><b>sudo service minidlna start</b></span></p></blockquote><p>Y habilitaremos minidlna para que el servicio sea levantado cuando iniciemos nuestro servidor local&nbsp;</p><blockquote><p><b><span style="color: #ffa400;">sudo service minidlna enable</span></b></p></blockquote><p>Deberemos acceder al archivo de configuración para indicarle, entre otras cosas, la ruta donde se encuentran los archivos que queremos mostrar en nuestra LAN. Estos se pueden encontrar en un <a href="https://www.enfaseterminal.com/2019/04/montar-disco-duro-usb-en-linux.html" target="_blank">disco duro externo</a> que habremos conectado a través del puerto USB de nuestro servidor doméstico.</p><blockquote><p><span style="color: #ffa400;"><b>sudo nano /etc/minidlna.conf</b></span></p></blockquote><p>Accederemos a un archivo de texto plano donde cambiaremos</p><p></p><ul><li>Ubicación de los archivos de video</li></ul><b><blockquote><span style="color: #ffa400;">media_dir=V,</span>/media/downloads/videos</blockquote></b><ul style="text-align: left;"><li>Ubicación de los archivos de música:&nbsp;</li></ul><b><blockquote><span style="color: #ffa400;">media_dir=A,</span>/media/downloads/musica</blockquote></b><div><ul style="text-align: left;"><li>Ubicación de los archivos de imagen</li></ul><blockquote><div><b><span style="color: #ffa400;">media_dir=P,</span>/media/downloads/fotos</b></div></blockquote><p></p><ul style="text-align: left;"><li>Ubicación de la base de datos que almacenará los archivos que se mostraran</li></ul><blockquote><div><b><span style="color: #ffa400;">db_dir=</span>/var/cache/minidlna</b></div></blockquote><p></p><ul style="text-align: left;"><li>&nbsp;Si queréis almacenar logs de lo que pasa en el servidor tienen que descomentar esta línea. Los logs los podréis encontrar en la ubicación.</li></ul><blockquote><div><b><span style="color: #ffa400;">log_dir=</span>/var/log</b></div></blockquote><p></p><ul style="text-align: left;"><li>&nbsp;Puerto en el que escuchara el pequeño servidor web, que nos mostrara una pequeña información de nuestro servidor. No podremos realizar ninguna acción, como por ejemplo la de configuración</li></ul><blockquote><div><b><span style="color: #ffa400;">port=</span>8200</b></div></blockquote><p><br /></p><blockquote><p></p><div class="separator" style="clear: both; text-align: center;"><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhbmmwvDgRV0F26JRjuGDaWMx5W4vEOkg62p8U-PY7C9zrADQ-Erwwj9nvXdn5FD1LYNubzKJOD9GygkuttWj9E0aEHAzTrNtTw6zPyZL-Zt5P8BImfBJlQU_8UynhLAvdR1vP_nIiUoDI/s552/Captura+de+pantalla+de+2021-08-19+20-08-40.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img alt="MiniDLNA status" border="0" data-original-height="552" data-original-width="525" height="320" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhbmmwvDgRV0F26JRjuGDaWMx5W4vEOkg62p8U-PY7C9zrADQ-Erwwj9nvXdn5FD1LYNubzKJOD9GygkuttWj9E0aEHAzTrNtTw6zPyZL-Zt5P8BImfBJlQU_8UynhLAvdR1vP_nIiUoDI/w304-h320/Captura+de+pantalla+de+2021-08-19+20-08-40.png" title="MiniDLNA status" width="304" /></a></div><p></p></blockquote><p></p><ul style="text-align: left;"><li>&nbsp;<span style="text-align: justify;">Nombre con el que se anunciara en nuestros clientes multimedia</span></li></ul><b style="text-align: justify;"><blockquote><span style="color: #ffa400;">friendly_name=</span><b>Pi</b></blockquote></b><p></p><p></p><div style="text-align: left;"><ul style="text-align: left;"><li>Seleccionamos la opción <span style="color: #ffa400;">yes</span>. De este modo, cuando se borre o copie contenido del servidor se actualizará la información de la base de datos</li></ul></div><p></p><blockquote><p><b><span style="color: #ffa400;">inotify=</span>yes</b></p></blockquote><p></p><ul style="text-align: left;"><li>&nbsp;Definimos los nombres que deben tener las caratulas de un audio o vídeo. Si queremos definir una caratula para una película podemos hacerlo guardando una imagen con el nombre cover.jpg o Cover.jpg en la carpeta que contiene la película. El tamaño recomendado es de 160×160 pixeles</li></ul><blockquote><div><b><span style="color: #ffa400;">album_art_names=</span>cover.jpg/cover.jpg</b></div></blockquote><p></p><ul style="text-align: left;"><li>En esta linea configuramos el intervalo de segundos que nuestro servidor anunciara su presencia en la red. Un buen intervalo serian cada 60 segundos</li></ul><blockquote><div><b><span style="color: #ffa400;">notify_interval=</span>60</b></div></blockquote><p></p><p></p></div><div><p style="text-align: justify;">Una vez modificado el archivo a nuestro gusto, lo guardaremos y reiniciaremos el demonio para que la nueva configuración tenga efecto:</p><blockquote><p style="text-align: justify;"><b><span style="color: #ffa400;">sudo service minidlna restart</span></b></p></blockquote><p>MiniDLNA usa la propiedad del Kernel inotify para detectar las modificaciones en cada una de las carpetas que almacena contenido. Al detectarse una modificación se actualiza el contenido de la base de datos /var/cache/minidlna/files.db.</p><p><br /></p><p>Para que inotify pueda monitorizar las modificaciones tendremos que cambiar sus límites. Para fijar un nuevo límite ejecutaremos el siguiente comando:</p><blockquote><p><b><span style="color: #ffa400;">sudo&nbsp;echo 65538 &gt; /proc/sys/fs/inotify/max_user_watches</span></b>&nbsp;</p></blockquote><blockquote><b style="text-align: justify;"><span style="color: #ffa400;">sudo service minidlna restart</span></b></blockquote><p>Si por alguna razón deseamos reconstruir la base de datos:</p><blockquote><p><b><span style="color: #ffa400;">sudo service minidlna force-reload</span></b></p></blockquote><p>Y listo ya tendríamos un servidor multimedia en nuestra red local y podríamos ver nuestros videos en nuestro:</p><p></p><ul style="text-align: left;"><li>SmartTV</li></ul><blockquote><div>Botón Source, Entrada externa o Fuente</div></blockquote><p>&nbsp;</p><div class="separator" style="clear: both; text-align: center;"><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgbRlLuutrv4hUo7LLF3YXWKQaXHiKV77-LZf737rtE_ssloNSohm0yhDeRNVmyoMjcMHxniJQGxqgwRd4KFEWOM-HFnchvTiRyZX2ZxoZGSh3qu-ZCi34CBNfVygsBU8GTFQ40tx_54vo/s800/detectar-servidor-dlna-televisor.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="461" data-original-width="800" height="184" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgbRlLuutrv4hUo7LLF3YXWKQaXHiKV77-LZf737rtE_ssloNSohm0yhDeRNVmyoMjcMHxniJQGxqgwRd4KFEWOM-HFnchvTiRyZX2ZxoZGSh3qu-ZCi34CBNfVygsBU8GTFQ40tx_54vo/s320/detectar-servidor-dlna-televisor.jpg" width="320" /></a></div><br /><p></p><ul style="text-align: left;"><li>En otros dispositivos podemos utilizar el reproductor multimedia <a href="https://www.enfaseterminal.com/2021/06/reproductor-vlc.html" target="_blank">VLC</a>&nbsp;</li></ul><blockquote><div>Accederemos a&nbsp;<span style="color: #ffa400; font-weight: bold;">Plug’n’Play Universal </span><span>y esperamos a que VLC encuentre nuestro servidor miniDLNA y nos permita reproducir su contenido.</span></div></blockquote><p></p><p></p></div><div><p></p></div><p></p>