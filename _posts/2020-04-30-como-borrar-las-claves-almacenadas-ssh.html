---
layout: post
title: Como borrar las claves almacenadas ssh de un equipo
date: '2020-04-30T21:36:00.000+02:00'
author: David P.
tags:
- ssh
- SHA256
- servidor
modified_time: '2020-04-30T21:36:37.113+02:00'
blogger_id: tag:blogger.com,1999:blog-3624480011084378437.post-6914567072938839316
blogger_orig_url: https://www.enfaseterminal.com/2020/04/como-borrar-las-claves-almacenadas-ssh.html
---

Al iniciar la conexión <a href="https://www.enfaseterminal.com/search/label/ssh">ssh</a> con un nuevo servidor, nos advierte que no es de confianza y si queremos almacenar las claves. Esta asociación es almacenada y nos permitirá encriptar las conexiones con el ordenador que queremos conectarnos.<div><div><br /></div><blockquote style="border: none; margin: 0px 0px 0px 40px; padding: 0px; text-align: left;"><div><div>sudo ssh 192.168.100.2 -l enfaseterminal</div></div><div><div>The authenticity of host '192.168.0.4 (192.168.100.2)' can't be established.</div></div><div><div>ECDSA key fingerprint is SHA256:EAM0qnIeDoo4cjNdWxkvbiRpc+5TREn4eaJ6+6WvT0U.</div></div><div><div>Are you sure you want to continue connecting (yes/no)?</div></div></blockquote><div><br /></div><div>En los siguientes inicios de sesion a traves de ssh no nos pedirá esta confirmación de seguridad, por que la asociación ya ha sido almacenada.&nbsp;</div><div>Pero si en algún momento la confianza entre el servidor y el cliente se corrompe. La conexión no será posible.</div><div><br /></div><div><br /></div><blockquote style="border: none; margin: 0px 0px 0px 40px; padding: 0px; text-align: left;"><div><div>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</div></div><div><div>@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @</div></div><div><div>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</div></div><div><div>IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!</div></div><div><div>Someone could be eavesdropping on you right now (man-in-the-middle attack)!</div></div><div><div>It is also possible that a host key has just been changed.</div></div></blockquote><div><br /></div><div><br /></div><div>Por una reinstalación del equipo o una actualización del sistema....., la clave maestra se modificara, y por lo tanto no coincidirá con la que nuestro cliente tiene almacenada, y por lo tanto la conexión ya no será segura, y no se permitirá. Esto requiere por nuestra parte una doble confirmación.</div><div>Tendremos que almacenar los datos almacenados de nuestro servidor.</div><div><br /></div><div>Primero tendremos que borrar de la base de datos la dirección ip y la clave maestra a ella asociada.</div><div><br /></div><blockquote style="border: none; margin: 0px 0px 0px 40px; padding: 0px;"><div style="text-align: left;">sudo ssh-keygen -f "/root/.ssh/known_hosts" -R "192.168.100.2"</div></blockquote><div><br /></div><div>Y nos responderá, la dirección ip del servidor ha sido encontrada y borrada del almacén y archivo actulizado. Pero por si fuera necesario se ha guardado una copia del original.</div><div><br /></div><blockquote style="border: none; margin: 0px 0px 0px 40px; padding: 0px; text-align: left;"><div>&nbsp;# Host 192.168.100.2 found: line 2</div><div>/root/.ssh/known_hosts updated.</div><div>Original contents retained as /root/.ssh/known_hosts.old</div></blockquote><div><br /></div><div>Y Segundo, al volver a conectar nos pedirá confirmación para almacenar el servidor SSH&nbsp; y su clave SHA256.</div><div><br /></div><blockquote style="border: none; margin: 0px 0px 0px 40px; padding: 0px; text-align: left;"><div><div>sudo ssh 192.168.100.2 -l enfaseterminal</div></div><div><div>The authenticity of host '192.168.0.4 (192.168.100.2)' can't be established.</div></div><div><div>ECDSA key fingerprint is SHA256:EAM0qnIeDoo4cjNdWxkvbiRpc+5TREn4eaJ6+6WvT0U.</div></div><div><div>Are you sure you want to continue connecting (yes/no)?</div></div></blockquote><div><br /></div><div>Temas relacionados:</div><div><br /></div><div><ul style="text-align: left;"><li><a href="https://www.enfaseterminal.com/2019/03/emulador-terminal-ssh-navegador-chrome.html" target="_blank">Emulador terminal ssh navegador Chrome&nbsp;</a></li><li><a href="https://www.enfaseterminal.com/2019/02/ejecutar-aplicaciones-modo-grafico.html" target="_blank">Ejecutar aplicaciones modo gráfico a través de una conexión ssh</a></li><li><a href="https://www.enfaseterminal.com/2019/01/acceder-otra-maquina-utilizando.html" target="_blank">Acceder a otra maquina utilizando protocolo ssh</a></li></ul></div><div><br /></div><div>&nbsp;</div><div><br /></div></div>